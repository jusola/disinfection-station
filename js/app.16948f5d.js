(function(e){function t(t){for(var n,i,o=t[0],c=t[1],l=t[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={app:0},s=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},2079:function(e,t,r){"use strict";var n=r("d4ec"),a=r("ade3"),s=function e(){var t=this;Object(n["a"])(this,e),Object(a["a"])(this,"addLoading",(function(e){t.loadingCount+=e})),Object(a["a"])(this,"getLoading",(function(){return t.loadingCount})),Object(a["a"])(this,"setScores",(function(e){t.scores=e})),Object(a["a"])(this,"setVisits",(function(e){t.visits=e})),Object(a["a"])(this,"setVisitsToday",(function(e){t.visitsToday=e})),Object(a["a"])(this,"setVisitsThisWeek",(function(e){t.visitsThisWeek=e})),this.loadingCount=0,this.scores=[],this.visits=[],this.visitsToday=0,this.visitsThisWeek=0};t["a"]=new s},"3cb4":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"section"},[r("b-table",{staticClass:"is-size-3",attrs:{data:e.store.scores,columns:e.columns}}),r("b-button",{attrs:{type:"is-info is-small"},on:{click:e.back}},[e._v(" "+e._s(e.$t("scoreboard.link.back"))+" ")])],1)},a=[],s=r("2079"),i=r("edb1"),o={data:function(){return{columns:[{field:"username",label:this.$t("scoreboard.label.username")},{field:"score",label:this.$t("scoreboard.label.score")}],store:s["a"],interval:null}},mounted:function(){i["a"].getScores(),this.interval=setInterval(i["a"].getScores,3e5)},beforeDestroy:function(){clearInterval(this.interval)},methods:{back:function(){history.go(-1)}}},c=o,l=r("2877"),u=Object(l["a"])(c,n,a,!1,null,null,null);t["default"]=u.exports},4385:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("section",{staticClass:"hero is-primary section"},[r("div",{staticClass:"hero-body container"},[r("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("login.title"))+" ")]),r("h2",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("login.subtitle"))+" ")])])]),r("section",{staticClass:"section"},[r("div",{staticClass:"columns"},[r("div",{staticClass:"column"},[r("div",{staticClass:"stats box notification is-success"},[r("div",{staticClass:"is-size-2 has-text-weight-semibold"},[e._v(" "+e._s(e.store.visitsToday)+" "+e._s(e.$t("main.stats.today"))+" ")]),r("div",{staticClass:"is-size-4"},[e._v(" "+e._s(e.store.visitsThisWeek)+" "+e._s(e.$t("main.stats.thisweek"))+" ")]),r("div",{staticClass:"is-size-4"},[e._v(" "+e._s(e.store.visits.length)+" "+e._s(e.$t("main.stats.total"))+" ")])]),r("div",{staticClass:"actions box notification is-info"},[r("div",{staticClass:"buttons"},[r("b-button",{staticClass:"is-primary",attrs:{tag:"router-link",to:"/scoreboard",type:"is-large"}},[e._v(" "+e._s(e.$t("main.link.scoreboard"))+" ")])],1),r("div",{staticClass:"buttons"},[r("b-button",{attrs:{tag:"router-link",to:"/configure",type:"is-warning"}},[e._v(" "+e._s(e.$t("main.link.configure"))+" ")]),r("b-button",{attrs:{type:"is-danger"},on:{click:e.logout}},[e._v(" "+e._s(e.$t("main.button.logout"))+" ")])],1)])]),r("div",{staticClass:"column"},[r("div",{staticClass:"box"},[r("VisitTable")],1)])])])])},a=[],s=r("edb1"),i=r("2079"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-table",{staticClass:"is-size-5",attrs:{data:e.store.visits,columns:e.columns}})},c=[],l={data:function(){return{columns:[{field:"time",label:this.$t("visits.label.time")},{field:"location",label:this.$t("visits.label.location")}],store:i["a"],interval:null}},mounted:function(){s["a"].getVisits(),this.interval=setInterval(s["a"].getVisits,3e5)},beforeDestroy:function(){clearInterval(this.interval)}},u=l,d=r("2877"),p=Object(d["a"])(u,o,c,!1,null,null,null),f=p.exports,h={name:"MainPage",components:{VisitTable:f},data:function(){return{store:i["a"]}},methods:{logout:function(){s["a"].logout()}}},b=h,g=Object(d["a"])(b,n,a,!1,null,null,null);t["default"]=g.exports},"49f8":function(e,t,r){var n={"./en.json":"edd4","./fi-fi.json":"a544"};function a(e){var t=s(e);return r(t)}function s(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=s,e.exports=a,a.id="49f8"},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("5363");var n=r("2b0e"),a=r("289d"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"is-viewport-height is-flex has-direction-column",attrs:{id:"app"}},[r("router-view"),r("footer",{staticClass:"footer"},[r("div",{staticClass:"content has-text-centered"},[r("p",[e._v(" "+e._s(e.$t("contact.problems"))+" "),r("a",{attrs:{href:"mailto:sanitizer@jusola.xyz"}},[e._v("sanitizer@jusola.xyz")])]),r("LocaleMenu")],1)])],1)},i=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"locale-changer"},[r("p",[e._v(e._s(e.$t("footer.locale")))]),r("span",{staticClass:"select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.$i18n.locale,expression:"$i18n.locale"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.$i18n,"locale",t.target.multiple?r:r[0])}}},e._l(e.langs,(function(t,n){return r("option",{key:"Lang"+n,domProps:{value:t}},[e._v(" "+e._s(t)+" ")])})),0)])])},c=[],l={name:"LocaleChanger",data:function(){return{langs:["fi-fi","en"]}}},u=l,d=r("2877"),p=Object(d["a"])(u,o,c,!1,null,null,null),f=p.exports,h={name:"Ticked",components:{LocaleMenu:f}},b=h,g=Object(d["a"])(b,s,i,!1,null,null,null),v=g.exports,m=r("a18c"),w=(r("4160"),r("d3b7"),r("ac1f"),r("466d"),r("159b"),r("ddb0"),r("a925"));function k(){var e=r("49f8"),t={};return e.keys().forEach((function(r){var n=r.match(/([A-Za-z0-9-_]+)\./i);if(n&&n.length>1){var a=n[1];t[a]=e(r)}})),t}n["a"].use(w["a"]);var y=new w["a"]({locale:"en",fallbackLocale:"en",messages:k()});r("f669");n["a"].config.productionTip=!1,n["a"].use(a["a"]);t["default"]=new n["a"]({router:m["a"],i18n:y,render:function(e){return e(v)}}).$mount("#app")},"9f66":function(e,t,r){"use strict";var n=r("d4ec"),a=r("262e"),s=r("2caf"),i=r("9072"),o=function(e){Object(a["a"])(r,e);var t=Object(s["a"])(r);function r(e,a){var s;return Object(n["a"])(this,r),s=t.call(this,e),s.type="DisinfError",s.translationKey=a,s}return r}(Object(i["a"])(Error)),c=function(e){Object(a["a"])(r,e);var t=Object(s["a"])(r);function r(e,a){var s;return Object(n["a"])(this,r),s=t.call(this,e,a),s.type="NetworkError",s}return r}(o),l=function(e){Object(a["a"])(r,e);var t=Object(s["a"])(r);function r(e,a){var s;return Object(n["a"])(this,r),s=t.call(this,e,a),s.type="ServerError",s}return r}(o),u=function(e){Object(a["a"])(r,e);var t=Object(s["a"])(r);function r(e,a){var s;return Object(n["a"])(this,r),s=t.call(this,e,a),s.type="CredentialError",s}return r}(o),d=function(e){Object(a["a"])(r,e);var t=Object(s["a"])(r);function r(e,a){var s;return Object(n["a"])(this,r),s=t.call(this,e,a),s.type="QueryError",s}return r}(o);function p(e,t,r){switch(e){case"NetworkError":return new c(t,r);case"ServerError":return new l(t,r);case"CredentialError":return new u(t,r);case"QueryError":return new d(t,r);default:return new o(t,r)}}t["a"]={NetworkError:c,ServerError:l,CredentialError:u,QueryError:d,makeError:p}},a18c:function(e,t,r){"use strict";var n=r("2b0e"),a=r("8c4f"),s=r("d470");n["a"].use(a["a"]);var i=[{path:"/login",name:"Login",component:r("a55b").default,props:!0},{path:"/main",name:"Main",component:r("4385").default,props:!0},{path:"/configure",name:"Configure",component:r("e5a2").default,props:!0},{path:"/scoreboard",name:"Scoreboard",component:r("3cb4").default,props:!0},{path:"/",name:"redirect",redirect:function(e){return s["a"].isLoggedIn()?{name:"Main"}:{name:"Login"}}}],o=new a["a"]({mode:"hash",base:"/",routes:i});t["a"]=o},a544:function(e){e.exports=JSON.parse('{"configure":{"instructions":{"1":"Käyttäjätunnuksesi näkyy pistetaulukossa","title":"Valitse käyttäjänimi ja salasana"},"label":{"button":"Tallenna","password":"Valitse salasana","username":"Valitse käyttäjänimi"},"placeholder":{"password":"Salasana","user":"Käyttäjänimi"}},"contact":{"problems":"Ongelmia? \\nLähetä sähköpostia"},"login":{"label":{"login":"Kirjaudu sisään","password":"Salasana","user":"Käyttäjä"},"placeholder":{"password":"Salasana","user":"Käyttäjätunnus"},"subtitle":"Otaniemen lukio","title":"Käsidesi pistetaulukko"},"main":{"link":{"configure":"Vaihda käyttäjänimi ja salasana","scoreboard":"Pistetaulukko"},"button":{"logout":"Kirjaudu ulos"},"stats":{"thisweek":"tällä viikolla","today":"tänään","total":"yhteensä"}},"register":{"instructions":{"1":"Seiso käsidesiautomaatin edessä Otaniemen lukiolla","2":"Automaatin näytöllä pitäisi olla koodi ja sijainti. Jos ei, mene lähemmäs.","3":"Kirjoita alle koodi ja sijainti ja klikkaa \\"@:register.label.register\\"","4":"Varmista, että seisot yhä näytön edessä, kun klikkaat nappia","title":"Rekisteröitymisohjeet:"},"label":{"code":"Koodi näytöltä käsidesiautomaatilla","register":"Rekisteröidy","location":"Sijainti (näkyy näytöllä)"},"placeholder":{"code":"Koodi","location":"Sijainti"}},"footer":{"locale":"Valitse kieli"},"scoreboard":{"label":{"score":"Pisteet","username":"Käyttäjänimi"},"link":{"back":"Takaisin"}},"visits":{"label":{"location":"Paikka","time":"Aika"}}}')},a55b:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flexed is-centered is-vcentered"},[r("section",{staticClass:"hero is-primary section"},[r("div",{staticClass:"hero-body container"},[r("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("login.title"))+" ")]),r("h2",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("login.subtitle"))+" ")])])]),r("section",{staticClass:"section container"},[r("div",{staticClass:"content"},[r("p",{staticClass:"is-size-5"},[e._v(" "+e._s(e.$t("register.instructions.title"))+" ")]),r("ol",{staticClass:"is-size-7",attrs:{type:"1"}},[r("li",[e._v(" "+e._s(e.$t("register.instructions.1"))+" ")]),r("li",[e._v(" "+e._s(e.$t("register.instructions.2"))+" ")]),r("li",[e._v(" "+e._s(e.$t("register.instructions.3"))+" ")]),r("li",[e._v(" "+e._s(e.$t("register.instructions.4"))+" ")])])])]),r("section",{staticClass:"section container"},[r("b-loading",{attrs:{active:0!==e.store.loadingCount,"is-full-page":!0,"can-cancel":!1}}),r("div",{staticClass:"column columns is-full"},[r("div",{staticClass:"column is-half",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}}},[r("b-field",{attrs:{label:e.$t("login.label.user")}},[r("b-input",{attrs:{type:"text",placeholder:e.$t("login.placeholder.user"),required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),r("b-field",{attrs:{label:e.$t("login.label.password")}},[r("b-input",{attrs:{type:"password",placeholder:e.$t("login.placeholder.password"),"password-reveal":"",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),r("b-button",{attrs:{expanded:"",type:"is-primary"},on:{click:e.login}},[e._v(" "+e._s(e.$t("login.label.login"))+" ")])],1),r("div",{staticClass:"column is-half",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.register(t)}}},[r("b-field",{attrs:{label:e.$t("register.label.location")}},[r("b-input",{attrs:{type:"text",placeholder:e.$t("register.placeholder.location"),required:""},model:{value:e.registerLocation,callback:function(t){e.registerLocation=t},expression:"registerLocation"}})],1),r("b-field",{attrs:{label:e.$t("register.label.code")}},[r("b-input",{attrs:{type:"text",pattern:"^[0-9]{6,}$",placeholder:e.$t("register.placeholder.code"),required:""},model:{value:e.registerCode,callback:function(t){e.registerCode=t},expression:"registerCode"}})],1),r("b-button",{attrs:{expanded:"",type:"is-primary"},on:{click:e.register}},[e._v(" "+e._s(e.$t("register.label.register"))+" ")])],1)])],1)])},a=[],s=(r("d470"),r("2079")),i=r("edb1"),o={data:function(){return{username:"",password:"",registerCode:"",registerLocation:"",mode:"login",store:s["a"]}},methods:{login:function(){i["a"].login(this.username,this.password),this.clearForms()},register:function(){i["a"].register(this.registerCode,this.registerLocation),this.clearForms()},switchTo:function(e){this.mode=e,this.clearForms()},clearForms:function(){this.username="",this.password="",this.registerCode="",this.registerLocation=""}}},c=o,l=r("2877"),u=Object(l["a"])(c,n,a,!1,null,null,null);t["default"]=u.exports},d470:function(e,t,r){"use strict";r("d3b7"),r("25f0");var n=r("5530"),a=(r("96cf"),r("1da1")),s=r("d4ec"),i=r("ade3"),o=r("04e1"),c=r.n(o),l=r("bc3a"),u=r.n(l),d=r("9f66"),p="https://otaniemi-hand-sanitizer.herokuapp.com/api",f=function e(){var t=this;Object(s["a"])(this,e),Object(i["a"])(this,"login",function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(r,n){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r||!n){e.next=12;break}return e.next=3,t.post("/login",{data:{username:r,password:n}});case 3:if(a=e.sent,s=a.data,!s.success){e.next=9;break}t.setToken(s.token),e.next=10;break;case 9:throw d["a"].makeError(s.error.type,s.error.message,s.error.translationKey);case 10:e.next=13;break;case 12:throw new d["a"].QueryError("Username or password missing","login.error.invalidquery");case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),Object(i["a"])(this,"register",function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(r,n){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r||!n){e.next=12;break}return e.next=3,t.post("/register",{data:{code:r,location:n}});case 3:if(a=e.sent,s=a.data,!s.success){e.next=9;break}t.setToken(s.token),e.next=10;break;case 9:throw d["a"].makeError(s.error.type,s.error.message,s.error.translationKey);case 10:e.next=13;break;case 12:throw new d["a"].QueryError("Code or location missing","register.error.invalidquery");case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),Object(i["a"])(this,"configure",function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(r,n){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r&&n){e.next=2;break}throw new d["a"].QueryError("Invalid query","configure.error.invalidquery");case 2:if(!t.isLoggedIn()){e.next=11;break}return e.next=5,t.post("/configure",{data:{username:r,password:n}});case 5:if(a=e.sent,s=a.data,s.success){e.next=9;break}throw d["a"].makeError(s.error.type,s.error.message,s.error.translationKey);case 9:e.next=12;break;case 11:throw new d["a"].CredentialError("No token","configure.error.notoken");case 12:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),Object(i["a"])(this,"getScores",Object(a["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.get("/scores");case 3:if(r=e.sent,n=r.data,n.success){e.next=7;break}throw d["a"].makeError(n.error.type,n.error.message,n.error.translationKey);case 7:return e.abrupt("return",r.data.scores);case 10:throw e.prev=10,e.t0=e["catch"](0),new d["a"].NetworkError("Network error","getscores.error.network");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))),Object(i["a"])(this,"getVisits",Object(a["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.get("/visits");case 3:if(r=e.sent,n=r.data,n.success){e.next=7;break}throw d["a"].makeError(n.error.type,n.error.message,n.error.translationKey);case 7:return e.abrupt("return",r.data.visits);case 10:throw e.prev=10,e.t0=e["catch"](0),new d["a"].NetworkError("Network error","getvisits.error.network");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))),Object(i["a"])(this,"getToken",(function(){return localStorage.getItem("token")})),Object(i["a"])(this,"setToken",(function(e){return e?localStorage.setItem("token",e):localStorage.removeItem("token")})),Object(i["a"])(this,"isLoggedIn",(function(){var e=t.getToken();return!(!e||t.isExpired(e))})),Object(i["a"])(this,"getUserID",(function(){var e=t.getToken(),r=c()(e);return r.userid})),Object(i["a"])(this,"logout",(function(){return t.setToken(null),!0})),Object(i["a"])(this,"isExpired",(function(e){var t=c()(e);return t.exp<Date.now()/1e3})),Object(i["a"])(this,"post",function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(r,a){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={Accept:"application/json","Content-Type":"application/json"},t.isLoggedIn()&&(s.Authorization="Bearer "+t.getToken()),e.prev=2,e.next=5,u()(Object(n["a"])({baseURL:t.server,method:"post",url:r,headers:s},a));case 5:return i=e.sent,e.abrupt("return",i);case 9:throw e.prev=9,e.t0=e["catch"](2),console.error(e.t0),new d["a"].NetworkError("Network error: "+e.t0.toString(),"error.networkerror");case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,r){return e.apply(this,arguments)}}()),Object(i["a"])(this,"get",function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(r,a){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={Accept:"application/json","Content-Type":"application/json"},t.isLoggedIn()&&(s.Authorization="Bearer "+t.getToken()),e.prev=2,e.next=5,u()(Object(n["a"])({baseURL:t.server,method:"get",url:r,headers:s},a));case 5:return i=e.sent,e.abrupt("return",i);case 9:throw e.prev=9,e.t0=e["catch"](2),console.error(e.t0),new d["a"].NetworkError("Network error: "+e.t0.toString(),"error.networkerror");case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,r){return e.apply(this,arguments)}}()),this.server=p};t["a"]=new f},e5a2:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flexed is-centered is-vcentered"},[r("section",{staticClass:"hero is-primary section"},[r("div",{staticClass:"hero-body container"},[r("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("login.title"))+" ")]),r("h2",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("login.subtitle"))+" ")])])]),r("section",{staticClass:"section container"},[r("div",{staticClass:"content"},[r("p",{staticClass:"is-size-5"},[e._v(" "+e._s(e.$t("configure.instructions.title"))+" ")]),r("ul",{staticClass:"is-size-7"},[r("li",[e._v(" "+e._s(e.$t("configure.instructions.1"))+" ")])])])]),r("section",{staticClass:"section container"},[r("b-loading",{attrs:{active:0!==e.loading,"is-full-page":!0,"can-cancel":!1}}),r("div",{staticClass:"column columns is-full"},[r("div",{staticClass:"column is-full",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.configure(t)}}},[r("b-field",{attrs:{label:e.$t("configure.label.username")}},[r("b-input",{attrs:{type:"text",placeholder:e.$t("configure.placeholder.user"),required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),r("b-field",{attrs:{label:e.$t("configure.label.password")}},[r("b-input",{attrs:{type:"password",placeholder:e.$t("configure.placeholder.password"),"password-reveal":"",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),r("b-button",{attrs:{expanded:"",type:"is-primary"},on:{click:e.configure}},[e._v(" "+e._s(e.$t("configure.label.button"))+" ")])],1)])],1)])},a=[],s=(r("d470"),r("2079")),i=r("edb1"),o={data:function(){return{username:"",password:""}},computed:{loading:function(){return s["a"].getLoading()}},methods:{configure:function(){i["a"].configure(this.username,this.password),this.clearForms()},clearForms:function(){this.username="",this.password="",this.recoverCode=""}}},c=o,l=r("2877"),u=Object(l["a"])(c,n,a,!1,null,null,null);t["default"]=u.exports},edb1:function(e,t,r){"use strict";r("4160"),r("d3b7"),r("25f0"),r("159b"),r("96cf");var n=r("1da1"),a=r("d4ec"),s=r("ade3"),i=r("56d7"),o=r("d470"),c=r("2079"),l=r("a18c"),u=r("9f66"),d=r("aced"),p=function e(){var t=this;Object(a["a"])(this,e),Object(s["a"])(this,"warnConsolePasting",(function(){console.warn("%cSTOP!","color:#000;background-color:#faa;font-size:20em"),console.warn("%cThe developer tools are intended for developers. If you have been told by someone to paste or type anything here, there is a 200% chance that they're trying to scam you.","color: #000; font-size:x-large;"),console.warn("%cTo stay safe, close this side-bar. ","color:#000;font-size:xx-large;"),console.warn("%cIf you want to learn more, visit https://en.wikipedia.org/wiki/Self-XSS","color: #6; font-size:large;")})),Object(s["a"])(this,"login",function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(r,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,c["a"].addLoading(1),r&&n){e.next=4;break}throw new u["a"].QueryError("Input both password and username","error.login.invalidquery");case 4:return e.next=6,o["a"].login(r,n);case 6:c["a"].addLoading(-1),l["a"].push("/"),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](0),t.showError(e.t0),c["a"].addLoading(-1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r){return e.apply(this,arguments)}}()),Object(s["a"])(this,"register",function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(r,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,c["a"].addLoading(1),r&&n){e.next=4;break}throw new u["a"].QueryError("Input valid code","error.register.invalidquery");case 4:return e.next=6,o["a"].register(r,n);case 6:c["a"].addLoading(-1),l["a"].push("/configure"),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](0),t.showError(e.t0),c["a"].addLoading(-1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r){return e.apply(this,arguments)}}()),Object(s["a"])(this,"configure",function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(r,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,c["a"].addLoading(1),r&&n){e.next=4;break}throw new u["a"].QueryError("Input both password and username","error.configure.invalidquery");case 4:return e.next=6,o["a"].configure(r,n);case 6:c["a"].addLoading(-1),l["a"].push("/main"),e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](0),"CredentialError"===e.t0.type&&l["a"].push("/login"),t.showError(e.t0),c["a"].addLoading(-1);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r){return e.apply(this,arguments)}}()),Object(s["a"])(this,"getScores",Object(n["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o["a"].getScores();case 3:r=e.sent,c["a"].setScores(r),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),t.showError(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))),Object(s["a"])(this,"getVisits",Object(n["a"])(regeneratorRuntime.mark((function e(){var r,n,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o["a"].getVisits();case 3:r=e.sent,n=0,a=0,s=i["default"].$i18n.locale,r.forEach((function(e,r){e.time>Date.now()-864e5&&n++,e.time>Date.now()-6048e5&&a++,e.time=new Date(e.time).toLocaleString(s),t[r]=e}),r),c["a"].setVisits(r),c["a"].setVisitsToday(n),c["a"].setVisitsThisWeek(a),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),t.showError(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))),Object(s["a"])(this,"logout",Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o["a"].logout(),l["a"].push("/");case 2:case"end":return e.stop()}}),e)})))),Object(s["a"])(this,"showError",(function(e){e=e.toString();var t=i["default"].$t(e);d["a"].open({message:t,type:"is-danger",duration:5e3,queue:!1})})),this.warnConsolePasting()};t["a"]=new p},edd4:function(e){e.exports=JSON.parse('{"login":{"label":{"password":"Password","login":"Login","user":"User"},"link":{},"placeholder":{"password":"Password","user":"Username"},"title":"Hand sanitizer scoreboard","subtitle":"Otaniemen lukio"},"register":{"label":{"code":"Code from screen at disinfection station","register":"Register","location":"Location of station (shown on screen)"},"link":{},"placeholder":{"code":"Code","location":"Location"},"instructions":{"1":"Stand in front of the hand sanitizer station at Otaniemen lukio","2":"The screen should show you a code and a location, if it doesn\'t, go closer","3":"Type the code and the location below and click \\"@:register.label.register\\"","4":"Make sure you are still standing in front of the screen when you click the button","title":"Instructions to create a new account:"}},"contact":{"problems":"Problems? Contact"},"configure":{"instructions":{"1":"Your username will be shown on the leaderboard","title":"Choose a username and a password"},"placeholder":{"user":"Username","password":"Password"},"label":{"username":"Choose a new username","button":"Save","password":"Choose a password"}},"main":{"link":{"configure":"Set username and password","scoreboard":"Scoreboard"},"button":{"logout":"Logout"},"stats":{"thisweek":"this week","today":"today","total":"total"}},"footer":{"locale":"Change locale"},"scoreboard":{"label":{"username":"Username","score":"Score"},"link":{"back":"Back"}},"visits":{"label":{"time":"Time","location":"Location"}}}')},f669:function(e,t,r){}});
//# sourceMappingURL=app.16948f5d.js.map